
<!DOCTYPE html>

<html lang="en" data-content_root="./">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3. Conceptual Design &#8212; Phlex 0 (90c6dcd) documentation</title>
    <link rel="stylesheet" type="text/css" href="static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="static/phlexframework.css?v=d0378a82" />
    <link rel="stylesheet" type="text/css" href="static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="static/sphinx-needs/modern.css?v=803738c0" />
    
    <script src="static/jquery.js?v=5d32c60e"></script>
    <script src="static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="static/documentation_options.js?v=8bc85dac"></script>
    <script src="static/doctools.js?v=9bcbadda"></script>
    <script src="static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script src="static/bizstyle.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="3.1. Topology of the data-flow graph" href="ch_conceptual_design/scheduling.html" />
    <link rel="prev" title="2.6. Data Flow" href="ch_preliminaries/data_flow.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="ch_conceptual_design/scheduling.html" title="3.1. Topology of the data-flow graph"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="ch_preliminaries/data_flow.html" title="2.6. Data Flow"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Phlex 0 (90c6dcd) documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3. </span>Conceptual Design</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="conceptual-design">
<h1><span class="section-number">3. </span>Conceptual Design<a class="headerlink" href="#conceptual-design" title="Link to this heading">¶</a></h1>
<div class="admonition-purpose admonition">
<p class="admonition-title">Purpose</p>
<p>The conceptual design is not a reference manual; it is a high-level description of how the framework aims to satisfy the stakeholder requirements (see <a class="reference internal" href="appendices/requirements.html#framework-requirements"><span class="std std-numref">Appendix B</span></a>).
The audience for the conceptual design is the physicist, algorithm author, or framework program runner.
More detailed design aspects in support of the conceptual model are given in <span>the subsystem design <em>(under preparation)</em></span>.</p>
</div>
<p>Phlex adopts the data-flow approach discussed in <a class="reference internal" href="ch_preliminaries/data_flow.html#data-flow-with-sequences"><span class="std std-numref">Section 2.6.1</span></a>.
Instead of expressing scientific workflows as monolithic functions to be executed, workflows are factorized into composable algorithms that operate on data products passed among them <a class="reference internal" href="appendices/requirements.html#DUNE 1" title="DUNE 1"><em class="xref need">[DUNE 1]</em></a>, <a class="reference internal" href="appendices/requirements.html#DUNE 111" title="DUNE 111"><em class="xref need">[DUNE 111]</em></a>, <a class="reference internal" href="appendices/requirements.html#DUNE 20" title="DUNE 20"><em class="xref need">[DUNE 20]</em></a>.
These algorithms then serve as operators to higher-order functions that operate on <em>data-product sequences</em>.</p>
<p>To guide the discussion of Phlex’s conceptual model, we refer to the graph in  <a class="reference internal" href="#workflow"><span class="std std-numref">Fig. 3.1</span></a>, which illustrates various framework aspects:</p>
<ul class="simple">
<li><p>the data-flow graph itself (see <a class="reference internal" href="ch_conceptual_design/scheduling.html#topology-of-the-data-flow-graph"><span class="std std-numref">Section 3.1</span></a>)</p></li>
<li><p>data products and data-product sets as passed along graph edges (see <a class="reference internal" href="ch_conceptual_design/data_organization.html#data-organization"><span class="std std-numref">Section 3.2</span></a>)</p></li>
<li><p>user-provided algorithms such as transforms, folds, etc. (see <a class="reference internal" href="ch_conceptual_design/algorithms.html#algorithms"><span class="std std-numref">Section 3.3</span></a> and <a class="reference internal" href="ch_conceptual_design/supported_hofs.html#supported-higher-order-functions"><span class="std std-numref">Section 3.5</span></a>)</p></li>
<li><p>the framework driver (see <a class="reference internal" href="ch_conceptual_design/driver.html#framework-driver"><span class="std std-numref">Section 3.6</span></a>)</p></li>
<li><p>data-product providers (see <a class="reference internal" href="ch_conceptual_design/providers.html#data-product-providers"><span class="std std-numref">Section 3.7</span></a>), which are plugins that provide data products from external entities to downstream user algorithms (e.g. input from ROOT files)</p></li>
<li><p>data-product writers (see <a class="reference internal" href="ch_conceptual_design/writers.html#data-product-writers"><span class="std std-numref">Section 3.8</span></a>), which are plugins that may write data products to an external entity (e.g. output files)</p></li>
<li><p>resources (see <a class="reference internal" href="ch_conceptual_design/resources.html#resources"><span class="std std-numref">Section 3.9</span></a>)</p></li>
<li><p>program configuration (see <a class="reference internal" href="ch_conceptual_design/user_configuration.html#program-configuration"><span class="std std-numref">Section 3.10</span></a>)</p></li>
</ul>
<figure class="align-default" id="workflow">
<div class="graphviz"><img src="images/graphviz-ccf080aab7ff9aa52e90cdc3be708b6c739495ca.png" alt="digraph {
  node [shape=&quot;box&quot;, style=&quot;rounded&quot;]
  edge [fontcolor=&quot;red&quot;];

  start [shape=&quot;point&quot;, width=0.1]
  unfold [label=&lt;unfold(&lt;font color=&quot;blue&quot;&gt;into_apas&lt;/font&gt;)&gt;]
  transform [label=&lt;transform(&lt;font color=&quot;blue&quot;&gt;clamp&lt;/font&gt;)&gt;]
  fold [label=&lt;fold(&lt;font color=&quot;blue&quot;&gt;sum_waveforms&lt;/font&gt;)&gt;]
  filter [label=&lt;filter(&lt;font color=&quot;blue&quot;&gt;high_energy&lt;/font&gt;)&gt;];
  observer [label=&lt;observe(&lt;font color=&quot;blue&quot;&gt;histogram_waveforms&lt;/font&gt;)&gt;];
  out [label=&quot;ROOT output file(s)&quot;, shape=&quot;cylinder&quot;, style=&quot;filled&quot;, fillcolor=&quot;lightgray&quot;]

  {
    rank=same;
    resource [label=&lt;Histogram&lt;br/&gt; resource&gt;,
              shape=hexagon,
              style=filled,
              fillcolor=thistle,
              margin=0];
    root [label=&quot;ROOT analysis file&quot;, style=filled, shape=cylinder];
  }

  start -&gt; driver [label=&quot; Configuration&quot;, fontcolor=&quot;forestgreen&quot;];

  {
    rank=same;
    gdml [label=&quot;GDML file&quot;, shape=&quot;cylinder&quot;, style=&quot;filled&quot;, fillcolor=&quot;lightgray&quot;]
    driver [label=&quot;SpillDriver&quot;];
    input [label=&quot;ROOT input files(s)&quot;, shape=&quot;cylinder&quot;, style=&quot;filled&quot;, fillcolor=&quot;lightgray&quot;];
  }

  driver -&gt; input [style=&quot;dotted&quot;, arrowhead=none];

  // Providers
  {
    rank=same;
    geometry_provider [label=&quot;provide(Geometry)&quot;, style=&quot;filled,rounded&quot;, fillcolor=&quot;lightblue&quot;];
    sim_hits_provider [label=&quot;provide(SimHits)&quot;, style=&quot;filled,rounded&quot; fillcolor=&quot;lightblue&quot;];
  }

  driver -&gt; geometry_provider [label=&quot; [J]&quot;, fontcolor=&quot;darkorange&quot;];
  driver -&gt; sim_hits_provider [label=&lt; [Spill&lt;sub&gt;&lt;i&gt;j&lt;/i&gt;&lt;/sub&gt;]&gt;, fontcolor=&quot;darkorange&quot;];

  geometry_provider -&gt; gdml [style=&quot;dotted&quot;, arrowhead=none];
  resource -&gt; root [style=&quot;dotted&quot;, arrowhead=none];

  sim_hits_provider -&gt; input [style=&quot;dotted&quot;, arrowhead=none];
  sim_hits_provider -&gt; unfold [label=&lt; [SimHits&lt;sub&gt;&lt;i&gt;j&lt;/i&gt;&lt;/sub&gt;]&gt;];
  geometry_provider -&gt; unfold [label=&lt; [Geometry]&gt;];

  unfold:s -&gt; transform [xlabel=&lt; [Waveforms&lt;sub&gt;&lt;i&gt;j k&lt;/i&gt;&lt;/sub&gt;]&gt;];
  transform:s -&gt; fold [taillabel=&lt;[ClampedWaveforms&lt;sub&gt;&lt;i&gt;j k&lt;/i&gt;&lt;/sub&gt;] &gt;,
                       labelangle=-80,
                       labeldistance=7
                      ];

  // Writers
  {
    rank=same;
    waveforms_writer [label=&quot;write(Waveforms)&quot;, style=&quot;filled,rounded&quot;, fillcolor=&quot;lightblue&quot;];
    summed_waveforms_writer [label=&quot;write(SummedWaveforms)&quot;, style=&quot;filled,rounded&quot;, fillcolor=&quot;lightblue&quot;];
    clamped_waveforms_writer [label=&quot;write(ClampedWaveforms)&quot;, style=&quot;filled,rounded&quot; fillcolor=&quot;lightblue&quot;];
  }

  unfold:s -&gt; waveforms_writer [label=&lt;[Waveforms&lt;sub&gt;&lt;i&gt;j k&lt;/i&gt;&lt;/sub&gt;]&gt;];
  transform:s -&gt; clamped_waveforms_writer;
  fold:s -&gt; summed_waveforms_writer [label=&lt; [SummedWaveforms&lt;sub&gt;&lt;i&gt;j&lt;/i&gt;&lt;/sub&gt;]&gt;];

  {waveforms_writer, clamped_waveforms_writer, summed_waveforms_writer} -&gt; out [style=&quot;dotted&quot;, arrowhead=none]

  unfold:s -&gt; filter [label=&lt; [Waveforms&lt;sub&gt;&lt;i&gt;j k&lt;/i&gt;&lt;/sub&gt;]&gt;];
  filter:s -&gt; observer [label=&lt; [Waveforms&lt;sub&gt;&lt;i&gt;j k&lt;/i&gt; '&lt;/sub&gt;]&gt;];
  resource -&gt; observer [style=&quot;dashed&quot;];

}" class="graphviz" /></div>
<figcaption>
<p><span class="caption-number">Fig. 3.1 </span><span class="caption-text">A sample workflow showing the different types of algorithm supported by Phlex (see <a class="reference internal" href="ch_preliminaries/functional_programming.html#sequences-of-data-and-higher-order-functions"><span class="std std-numref">Section 2.5</span></a> for a list of the supported algorithms).
Solid arrows show the flow of data through the graph.
Dotted lines indicate communication of data through the IO system.
The <em>SpillDriver</em> (see section <a class="reference internal" href="ch_conceptual_design/driver.html#framework-driver"><span class="std std-numref">Section 3.6</span></a>) is configured to process all <em>spills</em> in the specified ROOT input files.
The <em>provide</em> algorithms are configured to read <em>SimHits</em> associated with <em>spills</em> from the ROOT input files and a single <em>Geometry</em> object from the GDML file.
For each <em>spill</em>, an <em>unfold</em> algorithm is configured to create a sequence of <em>Waveforms</em> objects, creating one <em>Waveforms</em> object in each <em>APA</em>.
A <em>transform</em> algorithm is run on each of the <em>Waveforms</em> objects to create a <em>ClampedWaveforms</em> object.
A <em>fold</em> algorithm is run on each of the <em>ClampedWaveforms</em> objects in a <em>spill</em> to create a <em>SummedWaveforms</em> object for the <em>spill</em>.
The <em>write</em> algorithms are configured to write the <em>Waveforms</em>, <em>ClampedWaveforms</em>, and <em>SummedWaveforms</em> objects to one or more ROOT output files.
Each <em>Waveforms</em>, <em>ClampedWaveforms</em>, and <em>SummedWaveforms</em> object is associated with the appropriate <em>spill</em> or <em>APA</em>.
This workflow also shows a <em>filter</em> algorithm selecting only “high energy” <em>Waveforms</em>, and an <em>observe</em> algorithm creating a histogram from them, which is written to a ROOT analysis file.
Note that in this workflow the names <em>spill</em> and <em>APA</em> are not special to the Phlex framework; they are names (hypothetically) chosen by the experiment.</span><a class="headerlink" href="#workflow" title="Link to this image">¶</a></p>
</figcaption>
</figure>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/scheduling.html">3.1. Topology of the data-flow graph</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/data_organization.html">3.2. Data Organization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/data_organization.html#data-products">3.2.1. Data Products</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/data_organization.html#data-categories-families-and-data-product-sets">3.2.2. Data Categories, Families, and Data-Product Sets</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/data_organization.html#data-product-management">3.2.3. Data Product Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/data_organization.html#data-product-identification">3.2.4. Data Product Identification</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/algorithms.html">3.3. Algorithms</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/algorithms.html#input-parameters">3.3.1. Input Parameters</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/algorithms.html#return-types">3.3.2. Return Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/algorithms.html#function-names-and-qualifiers">3.3.3. Function Names and Qualifiers</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/registration.html">3.4. Framework Registration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/registration.html#accessing-configuration-information">3.4.1. Accessing Configuration Information</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/registration.html#framework-dependence-in-registration-code">3.4.2. Framework Dependence in Registration Code</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/registration.html#member-functions-of-classes">3.4.3. Member Functions of Classes</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/registration.html#overloaded-functions">3.4.4. Overloaded Functions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/supported_hofs.html">3.5. Supported Higher-Order Functions</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/hofs/transforms.html">3.5.1. Transforms</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/hofs/filters.html">3.5.2. Filters and Predicates</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/hofs/observers.html">3.5.3. Observers</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/hofs/partitioned_folds.html">3.5.4. Partitioned Folds</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/hofs/partitioned_unfolds.html">3.5.5. Partitioned Unfolds</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/hofs/composite_chofs.html">3.5.6. Composite CHOFs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/driver.html">3.6. Framework Driver</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/providers.html">3.7. Data-Product Providers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/writers.html">3.8. Data-Product Writers</a></li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/resources.html">3.9. Resources</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/resources.html#limited-resources">3.9.1. Limited Resources</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/resources.html#gpus">3.9.2. GPUs</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="ch_conceptual_design/user_configuration.html">3.10. Program Configuration</a><ul>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/user_configuration.html#mechanics-of-configuration-specification">3.10.1. Mechanics of Configuration Specification</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/user_configuration.html#programmatic-access-to-the-configuration">3.10.2. Programmatic Access to the Configuration</a></li>
<li class="toctree-l2"><a class="reference internal" href="ch_conceptual_design/user_configuration.html#semantic-structure-of-the-configuration">3.10.3. Semantic Structure of the Configuration</a></li>
</ul>
</li>
</ul>
</div>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="index.html">
              <img class="logo" src="static/phlex-logo.svg" alt="Logo of Phlex"/>
            </a></p>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="ch_preliminaries/data_flow.html"
                          title="previous chapter"><span class="section-number">2.6. </span>Data Flow</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="ch_conceptual_design/scheduling.html"
                          title="next chapter"><span class="section-number">3.1. </span>Topology of the data-flow graph</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="sources/conceptual_design.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="ch_conceptual_design/scheduling.html" title="3.1. Topology of the data-flow graph"
             >next</a> |</li>
        <li class="right" >
          <a href="ch_preliminaries/data_flow.html" title="2.6. Data Flow"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="index.html">Phlex 0 (90c6dcd) documentation</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3. </span>Conceptual Design</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Fermi Forward Discovery Group, LLC.
      Last updated on Jun 11, 2025.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>