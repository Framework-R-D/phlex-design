
<!DOCTYPE html>

<html lang="en" data-content_root="../">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="viewport" content="width=device-width, initial-scale=1" />

    <title>3.9. Resources &#8212; Phlex 0.4.alpha (c99fe26) documentation</title>
    <link rel="stylesheet" type="text/css" href="../static/pygments.css?v=d75fae25" />
    <link rel="stylesheet" type="text/css" href="../static/phlexframework.css?v=47741a9d" />
    <link rel="stylesheet" type="text/css" href="../static/graphviz.css?v=4ae1632d" />
    <link rel="stylesheet" type="text/css" href="../static/sphinx-data-viewer/jsonview.bundle.css?v=f6ef2277" />
    <link rel="stylesheet" type="text/css" href="../static/sphinx-needs/libs/html/datatables.min.css?v=4b4fd840" />
    <link rel="stylesheet" type="text/css" href="../static/sphinx-needs/common_css/need_toggle.css?v=5c6620df" />
    <link rel="stylesheet" type="text/css" href="../static/sphinx-needs/common_css/needstable.css?v=5e1b6797" />
    <link rel="stylesheet" type="text/css" href="../static/sphinx-needs/common_css/need_core.css?v=f5b60a78" />
    <link rel="stylesheet" type="text/css" href="../static/sphinx-needs/common_css/need_links.css?v=2150a916" />
    <link rel="stylesheet" type="text/css" href="../static/sphinx-needs/common_css/need_style.css?v=92936fa5" />
    <link rel="stylesheet" type="text/css" href="../static/sphinx-needs/modern.css?v=803738c0" />
    
    <script src="../static/jquery.js?v=5d32c60e"></script>
    <script src="../static/_sphinx_javascript_frameworks_compat.js?v=2cd50e6c"></script>
    <script src="../static/documentation_options.js?v=d8812877"></script>
    <script src="../static/doctools.js?v=9bcbadda"></script>
    <script src="../static/sphinx_highlight.js?v=dc90522c"></script>
    <script src="../static/sphinx-data-viewer/jsonview.bundle.js?v=18cd53c5"></script>
    <script src="../static/sphinx-data-viewer/jsonview_loader.js?v=f7ff7e7d"></script>
    <script src="../static/sphinx-needs/libs/html/datatables.min.js?v=8a4aee21"></script>
    <script src="../static/sphinx-needs/libs/html/datatables_loader.js?v=a2cae175"></script>
    <script src="../static/sphinx-needs/libs/html/sphinx_needs_collapse.js?v=dca66431"></script>
    <script src="../static/bizstyle.js"></script>
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="3.10. Program Configuration" href="program_configuration.html" />
    <link rel="prev" title="3.8. Data-Product Preservers" href="preservers.html" />
    <meta name="viewport" content="width=device-width,initial-scale=1.0" />
    <!--[if lt IE 9]>
    <script src="static/css3-mediaqueries.js"></script>
    <![endif]-->
  </head><body>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="program_configuration.html" title="3.10. Program Configuration"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="preservers.html" title="3.8. Data-Product Preservers"
             accesskey="P">previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Phlex 0.4.alpha (c99fe26) documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../conceptual_design.html" accesskey="U"><span class="section-number">3. </span>Conceptual Design</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.9. </span>Resources</a></li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body" role="main">
            
  <section id="resources">
<h1><span class="section-number">3.9. </span>Resources<a class="headerlink" href="#resources" title="Link to this heading">¶</a></h1>
<p>As mentioned in <a class="reference internal" href="algorithms.html#algorithms"><span class="std std-numref">Section 3.3</span></a>, the typical form of a C++ function that can be registered with the framework is:</p>
<div class="highlight-c++ notranslate"><div class="highlight"><pre><span></span><span class="n">return_type</span><span class="w"> </span><span class="nf">function_name</span><span class="p">(</span><span class="n">P1</span><span class="p">,</span><span class="w"> </span><span class="n">Pn</span><span class="p">...,</span><span class="w"> </span><span class="n">Rm</span><span class="p">...)</span><span class="w"> </span><span class="p">[</span><span class="n">quals</span><span class="p">];</span>
</pre></div>
</div>
<p>where the types <code class="code highlight c++ docutils literal highlight-c++"><span class="n">P1</span><span class="p">,</span><span class="w"> </span><span class="n">Pn</span><span class="p">...</span></code> represent data products, and the types <code class="code highlight c++ docutils literal highlight-c++"><span class="n">Rm</span><span class="p">...</span></code> represent resources.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Phlex calls <em>resources</em> the objects that can be used by an algorithm to notify the framework that the algorithm requires access to a shared entity that is not semantically related to the data-layer hierarchy.
Note that in the requirements that the word “resource” is sometimes used in a more general sense.
In this section we are only referring to the specific kind of resource described above.</p>
</div>
<p>An example registration of an algorithm that requires both a data product and a resource is found in <a class="reference internal" href="hofs/observers.html#observers"><span class="std std-numref">Section 3.5.2</span></a>.
The details of the registration code express to the framework which arguments correspond to data products and which correspond to resources <a class="reference internal" href="../appendices/requirements.html#DUNE 52" title="DUNE 52"><em class="xref need">[DUNE 52]</em></a>.
They may be stateless objects (e.g. a resource that denotes that an algorithm requires the use of a specific thread-unsafe library) or stateful objects (e.g. a resource that denotes access to a GPU, when the platform on which the framework program is running contains several GPUs).
Neither of these examples contain mutable state.
Resources (unlike data products) may have mutable state accessible to the algorithm (e.g. a histogram instance that could be shared across multiple algorithms).
For resources that are thread-unsafe, the framework ensures that two algorithms are not interacting with the resource at the same time.
The framework is responsible for efficiently scheduling algorithms based, in part, upon the availability of resources <a class="reference internal" href="../appendices/requirements.html#DUNE 50" title="DUNE 50"><em class="xref need">[DUNE 50]</em></a>.
To facilitate efficient scheduling of work, the resources needed by the program are specified via configuration or in the algorithm-registration code <a class="reference internal" href="../appendices/requirements.html#DUNE 47" title="DUNE 47"><em class="xref need">[DUNE 47]</em></a> <a class="footnote-reference brackets" href="#fdetails" id="id1" role="doc-noteref"><span class="fn-bracket">[</span>1<span class="fn-bracket">]</span></a>.</p>
<p>Examples of resources include:</p>
<ul class="simple">
<li><p>GPUs</p></li>
<li><p>Network connections</p></li>
<li><p>Thread-unsafe utilities</p></li>
<li><p>Inference servers</p></li>
<li><p>Database handles <a class="reference internal" href="../appendices/requirements.html#DUNE 35" title="DUNE 35"><em class="xref need">[DUNE 35]</em></a>, <a class="reference internal" href="../appendices/requirements.html#DUNE 40" title="DUNE 40"><em class="xref need">[DUNE 40]</em></a></p></li>
</ul>
<p>Whereas data products have provenance associated with them, resources do not.</p>
<section id="limited-resources">
<h2><span class="section-number">3.9.1. </span>Limited Resources<a class="headerlink" href="#limited-resources" title="Link to this heading">¶</a></h2>
<p>Some resources are used to indicate that an algorithm requires sole use of some program entity.
One example of such an entity is a thread-unsafe library, where the framework must ensure that only one algorithm is interacting with that library at any time <a class="reference internal" href="../appendices/requirements.html#DUNE 45" title="DUNE 45"><em class="xref need">[DUNE 45]</em></a>, <a class="reference internal" href="../appendices/requirements.html#DUNE 145" title="DUNE 145"><em class="xref need">[DUNE 145]</em></a>.
A second example of a limited resource is a fixed number of GPUs present on a particular platform, where Phlex must ensure that each algorithm requiring the use of a GPU has sole access to the GPU it is running on for the duration of the algorithm’s execution.
A third example of a limited resource could be an algorithm’s declaration that it requires spawning some number of threads for its execution (rather than using the framework’s task-based execution model).
Such an algorithm could declare the need for the reservation of some number of threads by requiing that number of thread resources <a class="reference internal" href="../appendices/requirements.html#DUNE 152" title="DUNE 152"><em class="xref need">[DUNE 152]</em></a>.
The framework would then ensure that only as many threads as the configuration has provided can be used by algoirthms at any one time.
These resources are called <em>limited resources</em>, because the framework is responsible for limiting the access to the resource to one algorithm at a time.</p>
<p>An algorithm to be used by Phlex indicates that it requires a limited resource by requiring an argument that denotes such a resource.</p>
</section>
<section id="gpus">
<h2><span class="section-number">3.9.2. </span>GPUs<a class="headerlink" href="#gpus" title="Link to this heading">¶</a></h2>
<p>In order to allow algorithms to make use of GPUs, and to allow the composition of workflows that involve both CPU-based and GPU-based algorithms, Phlex provides a mechanism for an algorithm that requires access to a GPU to declare that fact <a class="reference internal" href="../appendices/requirements.html#DUNE 54" title="DUNE 54"><em class="xref need">[DUNE 54]</em></a>.
This is done by making the algorithm accept a resource that denotes the GPU.
Phlex can support running on platforms that provide access to more than one GPU while ensuring that a given algorithm has sole access to the GPU it requires while it is executing.
Phlex also provides, through the same mechanism, the ability for an algorithm to specify that it requires remote access to a GPU.</p>
</section>
<section id="random-number-resource">
<h2><span class="section-number">3.9.3. </span>Random Number Resource<a class="headerlink" href="#random-number-resource" title="Link to this heading">¶</a></h2>
<p>The generation of pseudorandom numbers (hereafter just <em>random numbers</em>) is a critical aspect of obtaining physics results, especially when simulating data.
Although multiple random-number generation techniques exists, the vast majority of random-number implementations used in HEP rely on stateful random-number engines, which are subject to data races in multi-threaded contexts.
To ensure reproducible data and to ensure thread-safe access to stateful random-number engines, HEP frameworks impose idiosyncratic constraints on their use.</p>
<p>DUNE has similar requirements on reproducibility of random numbers in a concurrent context <a class="reference internal" href="../appendices/requirements.html#DUNE 36" title="DUNE 36"><em class="xref need">[DUNE 36]</em></a>.
However, instead of working around the limitations of stateful random-number engines, Phlex supports a random-number generation technique specifically designed to reproduce random-numbers in a concurrent program.
Counter-based random number generators (CBRNGs) <a class="reference internal" href="#wiki-cbrng" id="id2"><span>[Wiki-CBRNG]</span></a> provide such capabilities, and Phlex will provide an interface algorithm authors can use to take advantage of them.</p>
</section>
<section id="user-defined-resources">
<h2><span class="section-number">3.9.4. </span>User-defined Resources<a class="headerlink" href="#user-defined-resources" title="Link to this heading">¶</a></h2>
<p>While Phlex will provide some commonly-used types to represent resources, it will also be possible for users to create new types to represent a new type of resouce, with no modifications to the Phlex framework code <a class="reference internal" href="../appendices/requirements.html#DUNE 149" title="DUNE 149"><em class="xref need">[DUNE 149]</em></a>.
Such resource types have no dependency on Phlex, so that a user algorithm employing such a resource does not thereby incur any dependency on the framework.</p>
<p class="rubric">Footnotes</p>
<aside class="footnote-list brackets">
<aside class="footnote brackets" id="fdetails" role="doc-footnote">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id1">1</a><span class="fn-bracket">]</span></span>
<p>Details for specifying program resources are described in <span>the technical design <em>(under preparation)</em></span>.</p>
</aside>
</aside>
<p class="rubric">References</p>
<div role="list" class="citation-list">
<div class="citation" id="wiki-cbrng" role="doc-biblioentry">
<span class="label"><span class="fn-bracket">[</span><a role="doc-backlink" href="#id2">Wiki-CBRNG</a><span class="fn-bracket">]</span></span>
<p><a class="reference external" href="https://en.wikipedia.org/wiki/Counter-based_random_number_generator">https://en.wikipedia.org/wiki/Counter-based_random_number_generator</a></p>
</div>
</div>
</section>
</section>


            <div class="clearer"></div>
          </div>
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="Main">
        <div class="sphinxsidebarwrapper">
            <p class="logo"><a href="../index.html">
              <img class="logo" src="../static/phlex-logo.svg" alt="Logo of Phlex"/>
            </a></p>
  <div>
    <h3><a href="../index.html">Table of Contents</a></h3>
    <ul>
<li><a class="reference internal" href="#">3.9. Resources</a><ul>
<li><a class="reference internal" href="#limited-resources">3.9.1. Limited Resources</a></li>
<li><a class="reference internal" href="#gpus">3.9.2. GPUs</a></li>
<li><a class="reference internal" href="#random-number-resource">3.9.3. Random Number Resource</a></li>
<li><a class="reference internal" href="#user-defined-resources">3.9.4. User-defined Resources</a></li>
</ul>
</li>
</ul>

  </div>
  <div>
    <h4>Previous topic</h4>
    <p class="topless"><a href="preservers.html"
                          title="previous chapter"><span class="section-number">3.8. </span>Data-Product Preservers</a></p>
  </div>
  <div>
    <h4>Next topic</h4>
    <p class="topless"><a href="program_configuration.html"
                          title="next chapter"><span class="section-number">3.10. </span>Program Configuration</a></p>
  </div>
  <div role="note" aria-label="source link">
    <h3>This Page</h3>
    <ul class="this-page-menu">
      <li><a href="../sources/ch_conceptual_design/resources.rst.txt"
            rel="nofollow">Show Source</a></li>
    </ul>
   </div>
<search id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</search>
<script>document.getElementById('searchbox').style.display = "block"</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related" role="navigation" aria-label="Related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../genindex.html" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="program_configuration.html" title="3.10. Program Configuration"
             >next</a> |</li>
        <li class="right" >
          <a href="preservers.html" title="3.8. Data-Product Preservers"
             >previous</a> |</li>
        <li class="nav-item nav-item-0"><a href="../index.html">Phlex 0.4.alpha (c99fe26) documentation</a> &#187;</li>
          <li class="nav-item nav-item-1"><a href="../conceptual_design.html" ><span class="section-number">3. </span>Conceptual Design</a> &#187;</li>
        <li class="nav-item nav-item-this"><a href=""><span class="section-number">3.9. </span>Resources</a></li> 
      </ul>
    </div>
    <div class="footer" role="contentinfo">
    &#169; Copyright 2025, Fermi Forward Discovery Group, LLC.
      Last updated on Feb 09, 2026.
      Created using <a href="https://www.sphinx-doc.org/">Sphinx</a> 8.2.3.
    </div>
  </body>
</html>